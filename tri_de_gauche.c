/* ************************************************************************** */
/*                                                                            */
/*                                                        :::      ::::::::   */
/*   tri_de_gauche.c                                    :+:      :+:    :+:   */
/*                                                    +:+ +:+         +:+     */
/*   By: lribette <lribette@student.42.fr>          +#+  +:+       +#+        */
/*                                                +#+#+#+#+#+   +#+           */
/*   Created: 2023/12/06 13:42:43 by lribette          #+#    #+#             */
/*   Updated: 2023/12/11 18:39:21 by lribette         ###   ########.fr       */
/*                                                                            */
/* ************************************************************************** */

#include "push_swap.h"

int	closest_value(t_list *a, t_list *b)
{
	int	i;
	int	closest;

	i = -1;
	closest = where_index(a, imax(a));
	while (++i < a->len)
	{
		if (b->index[0] < a->index[i]
			&& a->index[i] - b->index[0] < a->index[closest] - b->index[0])
			closest = i;
	}
	return (a->index[closest]);
}

static void	ra_or_rra(t_list *a, t_list *b, int value)
{
	int	index;

	index = where_index(a, value);
	while (a->index[0] != value)
	{
		if (index <= a->len / 2)
			ra(a, 1);
		else
			rra(a, 1);
	}
	pa(a, b);
}

void	sort_supplement(t_list *a, t_list *b, int supplement)
{
	while (supplement--)
	{
		if (b->index[0] < imin(a) || b->index[0] > imax(a))
			ra_or_rra(a, b, imin(a));
		else
			ra_or_rra(a, b, closest_value(a, b));
	}
}

void	high_five(t_list *a, t_list *b)
{
	while (a->len != 3)
	{
		if (where_index(a, imin(a)) == 0)
			pb(a, b);
		else if (where_index(a, imin(a)) > a->len / 2)
			rra(a, 1);
		else if (where_index(a, imin(a)) <= a->len / 2)
			ra(a, 1);
	}
	sort_3_values(a);
	pa(a, b);
	pa(a, b);
	if (a->index[0] > a->index[1])
		sa(a, 1);
}

//3 5 1 2 4 
//182 83 218 416 23 180 451 458 348 28 425 34 276 401 82 380 184 168 94 298 225 334 302 105 432 462 418 59 312 99 328 388 367 310 415 217 91 406 144 117 290 498 232 127 74 135 301 500 474 455 197 132 365 48 46 421 211 322 374 89 193 417 361 222 269 273 341 123 309 324 433 124 384 379 14 315 176 274 254 358 126 157 202 366 496 90 101 398 436 96 472 167 477 320 476 159 404 53 392 134 383 336 153 128 339 234 4 499 185 316 224 362 378 345 162 377 17 160 489 45 230 351 258 215 469 424 448 174 431 9 497 177 405 402 220 133 478 231 26 340 337 467 420 129 189 214 158 468 491 372 293 490 400 154 173 488 13 145 140 427 349 311 357 263 44 466 18 161 196 453 3 452 297 381 327 219 485 142 57 75 112 249 289 426 199 248 331 356 2 440 226 125 102 460 118 149 216 370 194 413 475 104 130 262 54 364 395 165 243 480 71 256 430 261 368 299 304 200 442 495 407 300 58 307 122 86 479 397 116 321 385 32 443 296 115 264 206 492 15 73 363 286 114 183 239 486 306 76 291 461 60 143 55 242 465 247 81 228 394 175 412 244 109 422 205 238 111 359 259 92 155 382 192 36 203 107 52 93 260 37 221 68 233 178 308 287 354 41 151 371 152 284 70 87 235 314 257 169 240 163 49 444 1 61 325 164 445 97 270 138 252 113 393 457 186 387 209 329 137 396 35 446 389 245 410 484 146 326 305 166 333 473 343 435 63 408 246 459 51 428 50 27 292 471 429 67 250 288 171 65 79 22 482 376 409 207 148 227 411 438 283 237 172 439 141 187 275 375 56 103 190 33 7 119 100 5 19 449 181 25 147 338 456 251 236 77 386 355 493 139 423 198 414 6 353 281 80 40 208 191 21 390 271 24 88 47 20 346 447 210 12 481 487 204 360 30 282 323 223 131 229 352 344 279 350 8 303 212 441 201 285 330 108 136 295 10 85 463 280 42 39 84 195 347 29 369 255 106 335 268 121 66 313 342 454 403 31 391 69 150 267 179 272 156 277 434 419 98 265 170 318 373 294 494 72 213 470 317 11 464 16 188 120 241 253 266 278 450 38 62 319 399 43 110 78 64 437 332 95 483 

void	ending_sort(t_list *a, t_list *b)
{
	while (b->len)
	{
		while (where_index(b, imax(b)) > b->len / 2 && b->len)
		{
			if (b->index[b->len - 2] > b->index[b->len - 1])
			{
				rrb(b, 1);
				rrb(b, 1);
				sb(b, 1);
			}
			else
				rrb(b, 1);
			ra_or_rra(a, b, closest_value(a, b));
		}
		while (where_index(b, imax(b)) <= b->len / 2 && b->len)
			ra_or_rra(a, b, closest_value(a, b));
	}
	while (where_index(a, imin(a)) != 0)
		rra(a, 1);
}
